{% extends "base.html" %}
{% load static %}
{% block title %}Home{% endblock %}

{% block navbar %}
<nav class="sticky top-0 z-20 backdrop-blur bg-gray-900/70 border-b border-white/10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-14 items-center justify-between">
      <div class="flex items-center gap-6">
        {% if user.is_authenticated %}
          <a href="{% url 'home' %}" class="flex items-center gap-2" aria-label="Go to dashboard">
            <svg viewBox="0 0 24 24" class="h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z" fill="currentColor"/>
              <path d="M10 9l3 3-3 3" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
            </svg>
            <span class="font-semibold tracking-wide">SSHerlock</span>
          </a>
        {% else %}
          <a href="{% url 'landing' %}" class="flex items-center gap-2" aria-label="Go to landing">
            <svg viewBox="0 0 24 24" class="h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z" fill="currentColor"/>
              <path d="M10 9l3 3-3 3" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
            </svg>
            <span class="font-semibold tracking-wide">SSHerlock</span>
          </a>
        {% endif %}
        {% if user.is_authenticated %}
          {% url 'home' as home_url %}
          {% url 'credential_list' as credential_list_url %}
          {% url 'llm_api_list' as llm_api_list_url %}
          {% url 'bastion_host_list' as bastion_host_list_url %}
          {% url 'target_host_list' as target_host_list_url %}
          {% url 'job_list' as job_list_url %}
          {% url 'account' as account_url %}
          <a href="{{ home_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == home_url %}border-white/40{% endif %}" {% if request.path == home_url %}aria-current="page"{% endif %}>Home</a>
          <a href="{{ credential_list_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == credential_list_url %}border-white/40{% endif %}" {% if request.path == credential_list_url %}aria-current="page"{% endif %}>Credentials</a>
          <a href="{{ llm_api_list_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == llm_api_list_url %}border-white/40{% endif %}" {% if request.path == llm_api_list_url %}aria-current="page"{% endif %}>LLM APIs</a>
          <a href="{{ bastion_host_list_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == bastion_host_list_url %}border-white/40{% endif %}" {% if request.path == bastion_host_list_url %}aria-current="page"{% endif %}>Bastion Hosts</a>
          <a href="{{ target_host_list_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == target_host_list_url %}border-white/40{% endif %}" {% if request.path == target_host_list_url %}aria-current="page"{% endif %}>Target Hosts</a>
          <a href="{{ job_list_url }}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == job_list_url %}border-white/40{% endif %}" {% if request.path == job_list_url %}aria-current="page"{% endif %}>Jobs</a>
        {% endif %}
      </div>
      <div class="relative">
        {% if user.is_authenticated %}
          <button class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border-b-2 border-transparent {% if request.path == account_url %}border-white/40{% endif %}" id="accountButton">Account</button>
          <div id="accountDropdown" class="absolute right-0 mt-2 w-56 rounded-md border border-white/10 bg-gray-800/95 backdrop-blur shadow-xl z-10 hidden">
            <a href="{% url 'account' %}" class="block px-4 py-2 text-sm text-white hover:bg-white/10 rounded">Settings</a>
            <form method="post" action="{% url 'logout' %}" class="block">
              {% csrf_token %}
              <button type="submit" class="w-full text-left px-4 py-2 text-sm text-white hover:bg-white/10 rounded">Sign Out</button>
            </form>
          </div>
        {% else %}
          {% if request.path != '/accounts/login/' %}
            <a href="{% url 'login' %}" class="px-3 py-2 text-sm text-gray-300 hover:text-white rounded-md border border-white/10 bg-white/5">Login</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
</nav>
{% endblock %}
